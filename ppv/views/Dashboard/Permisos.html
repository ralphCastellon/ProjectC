<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">    
    <title>PPV</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    
    <!-- J Alert (Para el estilo de los msj) -->
	<link rel="stylesheet" href="css/jAlert.css">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <!-- DataTables CSS -->
    <link href="vendor/datatables-plugins/dataTables.bootstrap.css" rel="stylesheet">
    <!-- DataTables Responsive CSS -->
    <link href="vendor/datatables-responsive/dataTables.responsive.css" rel="stylesheet">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="css/fontastic.css">
    <!-- Google fonts - Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <!-- jQuery Circle-->
    <link rel="stylesheet" href="css/grasp_mobile_progress_circle-1.0.0.min.css">
    <!-- Custom Scrollbar-->
    <link rel="stylesheet" href="vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="img/favicon/favicon.ico">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
  </head>
  <body>
  
  	<div id="wrapper">
  
    <!-- Side Navbar -->
    <nav class="side-navbar">
      <div class="side-navbar-wrapper">
        <!-- Sidebar Header    -->
        <div class="sidenav-header d-flex align-items-center justify-content-center">
          <!-- User Info-->
          <div class="sidenav-header-inner text-center"><img src="img/avatar-5.jpg" alt="person" class="img-fluid rounded-circle">
            <h2 class="h5">Anderson Hardy</h2><span>Contadora</span>
          </div>
          <!-- Small Brand information, appears on minimized sidebar-->
          <div class="sidenav-header-logo"><a href="flesnic.jsp" class="brand-small text-center"> <strong>F</strong><strong class="text-primary">N</strong></a></div>
        </div>
        <!-- Sidebar Navigation Menus-->
        <div class="main-menu">
          <h5 class="sidenav-heading">Principal</h5>
          <ul id="side-main-menu" class="side-menu list-unstyled">                  
            <li><a href="flesnic.jsp"> <i class="icon-home"></i>Home</a></li>
            <li><a href="#exampledropdownDropdown" aria-expanded="false" data-toggle="collapse"> <i class="icon icon-check"></i>Cuentas</a>
              <ul id="exampledropdownDropdown" class="collapse list-unstyled ">
                <li><a href="asientoContable.jsp">Asiento contable</a></li>
                 <li><a href="cuentasMayores.jsp">Cuentas Mayores</a></li>
                <li><a href="cuentas.jsp">Sub-Cuentas</a></li>
                <li><a href="cabeceraComprobante.jsp">Cabecera de Comprobante</a></li>
                <li><a href="detalleComprobante.jsp">Detalle de Comprobante</a></li>
                <li><a href="tipoComprobante.jsp">Tipo de Comprobante</a></li>
                <li><a href="encabezado.jsp">Encabezados</a></li>
                <li><a href="activoFijo.jsp">Activos Fijos</a></li>
              </ul>
            </li>
            <li><a href="#exampledropdownDropdown2" aria-expanded="false" data-toggle="collapse"> <i class="icon icon-padnote"></i>Reportes</a>
              <ul id="exampledropdownDropdown2" class="collapse list-unstyled ">
              	<li><a href="comprobanteDiario.jsp">Comprobante Diario</a></li>
              	<li><a href="libroMayor.jsp">Libro Mayor</a></li>
              </ul>
            </li>
            <li><a href="#exampledropdownDropdown3" aria-expanded="false" data-toggle="collapse"> <i class="icon-interface-windows"></i>Configuraciones</a>
              <ul id="exampledropdownDropdown3" class="collapse list-unstyled ">
                <li><a href="anioFiscal.jsp">Año Fiscal</a></li>
                <li><a href="periodoFiscal.jsp">Periodo Fiscal</a></li>
                <li><a href="moneda.jsp">Monedas</a></li>
                <li><a href="tasaCambios.jsp">Tasa de Cambio</a></li>
              </ul>
            </li>

             <li><a href="#exampledropdownDropdown4" aria-expanded="false" data-toggle="collapse"> <i class="icon icon-user"></i>Seguridad</a>
              <ul id="exampledropdownDropdown4" class="collapse list-unstyled ">
               <li><a href="Usuarios.jsp">Control de Usuarios</a></li>
               <li><a href="Roles.jsp">Control Roles</a></li>
               <li><a href="Opciones.jsp">Control Opciones</a></li>
                <li><a href="Permisos.jsp">Control Permisos</a></li>
                <li><a href="asignarRolUser.jsp">Asignar rol a usuario</a></li>              
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="page">
       <!-- navbar-->
      <header class="header">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
              <div class="navbar-header"><a id="toggle-btn" href="#" class="menu-btn"><i class="icon-bars"> </i></a><a href="flesnic.jsp" class="navbar-brand">
                  <div class="brand-text d-none d-md-inline-block"><span><strong class="text-primary">Flesnic</strong></span></div></a></div>
              <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
               
                <li class="nav-item"><a href="../Login/login.jsp" class="nav-link logout">Logout<i class="fa fa-sign-out"></i></a></li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
         <!--         Comienza Mi tabla -->

           <div class="row">
            <div class="col-lg-10">
              <div class="card">
                <div class="card-header">
                  <h4>Control de Permisos</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">                
                  <!-- /.panel-heading -->
                        <div class="panel-body"> 
                         <p> En esta pantalla encontrará los permisos registrados del sistema<p>        
                        	<div align="right" style="margin-top: -40px;">
                        		<a href="nuevoOpcion.jsp">
                        			<i class="fa fa-user-plus fa-2x" title="Registrar un nuevo permiso"></i>
                        			&nbsp;Nuevo Permiso
                        		</a>
                        	</div>
                        	<div><br></div>
                    <table class="table">
                      <thead>
                        <tr>
                          <th>N°</th>
                           <th>Permiso</th>
                          <th>Descripción</th>
                          <th>Acciones</th>	
                        </tr>
                      </thead>
                      <tbody>            
                       <tr class="odd gradeX">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                       	<td align="center">
                                       		<a data-toggle="modal" onclick="editarPermiso('<%=permiso.getIdPermisos()%>','<%=permiso.getPermiso()%>','<%=permiso.getDescripPermiso()%>');" href="#myModal">
	                                       		<i class="fa fa-edit" title="Modificar Permiso"></i>
                                       		</a>&nbsp;&nbsp;
                                       		
                                       		
                                       		<a id="eliminarUs" onclick="eliminarPermiso('<%=permiso.getIdPermisos()%>');" href="#">
	                                       		<i class="fa fa-user-times" title="Eliminar Permiso"></i>
                                       		</a>
                                       		
                                       </td>
                                       
                                    </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
        
<!--         Fin Mi Tabla -->


<!--     COMIENZA MI MODALBOX     -->
    
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          
          <h4>Actualizar los datos de la opción</h4>
        
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <form role="form" action="../Sl_Permisos" method="post">
                                    	<input type="hidden" name="opc" id="opc" value="2"/>
                                    	 <input type="hidden" name="idPer" id="idPer"/>
			                             <div class="form-group">
                                            <label>Permiso: </label>
                                            <input type="text" class="form-control" name="permiso" id="permiso" required />
                                            <p style="color: gray;" class="help-block">Ejemplo: Administrador</p>
                                        </div>
                                        <div class="form-group">
                                            <label>Descripción: </label>
                                            <input type="text" class="form-control" name="descripPermiso" id="descripPermiso" required />
                                            <p style="color: gray;" class="help-block">Ejemplo: Encargado de toda el área de administración</p>
                                        </div>
                                                                    
                                        <div align="right">
	                                        <button type="submit" class="btn btn-primary">Guardar</button>
	                                        <button type="reset" class="btn btn-danger">Cancelar</button>
                                        </div>
                                    </form>
        </div>
       
      </div>
      
    </div>
  </div>
<!--     FIN MODALBOX -->
</div>
    <!-- /#wrapper -->

       <!-- Javascript files-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper.js/umd/popper.min.js"> </script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="js/grasp_mobile_progress_circle-1.0.0.min.js"></script>
    <script src="vendor/jquery.cookie/jquery.cookie.js"> </script>
    <script src="vendor/chart.js/Chart.min.js"></script>
    <script src="vendor/jquery-validation/jquery.validate.min.js"></script>
    <script src="vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>
    
    <!--     Jalert (Para el llamado de los msj) -->
	
	<script src="js/jAlert.min.js"></script>
	<script src="js/jAlert-functions.min.js"> //optional!!</script>
    
    <!-- DataTables JavaScript -->
    <script src="vendor/datatables/js/jquery.dataTables.min.js"></script>
    <script src="vendor/datatables-plugins/dataTables.bootstrap.min.js"></script>
    <script src="vendor/datatables-responsive/dataTables.responsive.js"></script>
    
    <!-- Main File-->
    <script src="js/front.js"></script>
    
        <!-- Page-Level Demo Scripts - Tables - Use for reference -->
    
    <script>
//     	Nuestras funciones
		function editarPermiso(idPer, permiso, descripPermiso)
		{
			$('#idPer').val(idPer);
			$('#perName').val(permiso);
			$('#descripPermiso').val(descripPermiso);
		}
		
		
		function eliminarPermiso(idPermiso)
		{
           confirm(function(e)
        	{
	          e.preventDefault();
	          window.location.href="../Sl_Permisos?idP="+idPermiso;
           	});
           return false; 
		}
		
    </script>
    
    
    <script>
    $(document).ready(function() 
    {
        $('#dataTables-example').DataTable({
            responsive: true
        });
        
        
//      Para evaluar el mensaje del servlet
    	var msj = "<%=mensaje%>";
//     	Para evaluar mensajes de guardado
    	if(msj=="1")
    	{
    	      $.jAlert({
    	          'title': 'EXITO!',
    	          'content': 'El permiso ha sido eliminado éxitosamente...',
    	          'theme': 'green',
    	          'btns': { 'text': 'close' }
    	        });
    	}
    	if(msj=="0")
    	{
    		$.jAlert({
  	          'title': 'ERROR!',
  	          'content': 'El permiso no se ha podido eliminar...',
  	          'theme': 'red',
  	          'btns': { 'text': 'close' }
  	        });
    	}
//     	Para evaluar mensajes de actualizado 
    	if(msj=="actualizado1")
    	{
    	      $.jAlert({
    	          'title': 'EXITO!',
    	          'content': 'EL permiso ha sido actualizado éxitosamente...',
    	          'theme': 'green',
    	          'btns': { 'text': 'close' }
    	        });
    	}
    	if(msj=="actualizado2")
    	{
    		$.jAlert({
  	          'title': 'ERROR!',
  	          'content': 'El permiso no se ha podido actualizar porque el nombre de la opción ya existe!!!',
  	          'theme': 'red',
  	          'btns': { 'text': 'close' }
  	        });
    	}
    	if(msj=="actualizado3")
    	{
    		$.jAlert({
  	          'title': 'ERROR!',
  	          'content': 'El permiso no se ha podido actualizar porque el permiso no existe o no fue encontrado',
  	          'theme': 'red',
  	          'btns': { 'text': 'close' }
  	        });
    	}
    	if(msj=="actualizado0")
    	{
    		$.jAlert({
  	          'title': 'ERROR!',
  	          'content': 'El permiso no se ha podido actualizar, favor contacte al Administrador del Sistema!',
  	          'theme': 'red',
  	          'btns': { 'text': 'close' }
  	        });
    	}
    	
    	if(msj=="PerName")
    	{
    		$.jAlert({
  	          'title': 'ERROR!',
  	          'content': 'La opción no puede ser una cadena vacía!!!',
  	          'theme': 'red',
  	          'btns': { 'text': 'close' }
  	        });
    	}
    	
    	 $.jAlert('attach');
        
        
    });
    </script>
    
    </body>
</html>